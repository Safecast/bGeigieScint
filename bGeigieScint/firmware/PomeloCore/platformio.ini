[env:esp32-c3]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino

; MCU Configuration
board_build.mcu = esp32c3
board_build.f_cpu = 160000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio
board_build.partitions = default.csv

; Flash configuration
board_upload.flash_size = 4MB

; Compiler flags
build_flags =
    ; Basic defines
    -DARDUINO_ESP32C3_DEV
    -DESP32C3
    -DCORE_DEBUG_LEVEL=0

    ; USB CDC for serial communication (ESP32-C3 has native USB)
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1

    ; Optimization
    -Os
    -ffunction-sections
    -fdata-sections
    -Wall

    ; Include paths
    -IPomeloCore/src
    -IPomeloCore/src/config

; Library configuration
lib_ldf_mode = deep+
lib_compat_mode = strict

; Upload configuration
upload_protocol = esptool
upload_speed = 921600

; Monitor configuration
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Debug configuration (ESP32-C3 supports USB-JTAG)
debug_tool = esp-builtin
debug_init_break = tbreak setup
debug_speed = 12000
